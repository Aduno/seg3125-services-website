<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>SEG3125 Project</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" /><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <link rel="stylesheet" href="../style.css">
        <link rel="stylesheet" href="../css/lesson-style.css">
        <script type="module" src="../app.js"></script>
    </head>
    <body>
        <div class="container-fluid">
            <div class="row" id="top-bar">
                <!-- Logo and name -->
                <a class="col-6" href="../index.html">
                    <div class="logo-left">
                        <img src="../img/Tuba.svg">
                        <h3 class="logo-text">UO Instrument Services</h3>
                    </div>
                </a>
                <div class="col-6" href="../index.html">
                    <div class="logo-right">
                        <!-- Login -->
                        <a href="login.html"><img src="../img/user.svg"></a>
                        <!-- French/English button -->
                        <a href="login.html"><h3 class="language-toggle">Fr</h3></a>
                    </div>
                </div>
            </div>
            <nav class="navbar navbar-expand">
                <ul class="nav navbar-nav">
                    <li class="active" id="home"><a href="../index.html">Home</a></li>
                    <li class="nav-item dropdown" id="services">
                        <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" href="#">Services</a> 
                        <ul class="dropdown-menu">
                            <li class="dropdown-item"><a class="dropdown-text" href="rental.html">Rental</a></li>
                            <li class="dropdown-item"><a class="dropdown-text"href="lessons.html">Lessons</a></li>
                            <li class="dropdown-item"><a class="dropdown-text"href="repair.html">Repair</a></li>
                        </ul>
                    </li>
                    <li class="active" id="team"><a href="team.html">Our team</a></li>
                </ul>
            </nav>
        </div>
        <div class="row" id="main-container">
        <!-- Form -->
            <div class="col-9"id="main">
                <form>
                    <div class="container-fluid drop-container">
                        <label for="istr" class="form-label">Select instructor</label>
                        <div><select id="istr-menu"></select></div>
                    </div> 
                    <div class="container-fluid drop-container">
                        <label for="inst" class="form-label">Select instrument</label>
                        <div><select id="inst-menu"></select></div>
                    </div> 
                    <div class="container-fluid drop-container">
                        <label for="inst" class="form-label">Select level</label>
                        <div><select id="skill-menu">
                            <option>Beginner</option>
                            <option>Intermediate</option>
                            <option>Advanced</option>
                        </select></div>
                    </div> 
                    <div class="container-fluid" id="name-container">
                        <label for="name" class="form-label">Name</label>
                        <div><input class="user-input" type="text" id="name" required="required"></div>
                    </div>
                    <div class="container-fluid" id="email-container">
                        <label for="email" class="form-label">Email</label>
                        <div><input class="user-input" type="text" id="email" required="required"></div>
                    </div>
                    <div class="container-fluid" id="numer-container">
                        <label for="number" class="form-label">Phone number</label>
                        <div><input class="user-input" type="text" id="number"></div>
                    </div>
                    <div class="container-fluid">
                        <div>
                            <input type="radio" id="monday" name="day" value="Monday">
                            <label for="monday">Monday</label>
                        </div>
                        <div>
                            <input type="radio" id="tuesday" name="day" value="Tuesday">
                            <label for="tuesday">Tuesday</label>
                        </div>
                        <div>
                            <input type="radio" id="wednesday" name="day" value="Wednesday">
                            <label for="wednesday">Wednesday</label>
                        </div>
                        <div>
                            <input type="radio" id="thursday" name="day" value="Thursday">
                            <label for="thursday">Thursday</label>
                        </div>
                        <div>
                            <input type="radio" id="friday" name="day" value="Friday">
                            <label for="friday">Friday</label>
                        </div>
                        <div>
                            <input type="radio" id="saturday" name="day" value="Saturday">
                            <label for="saturday">Saturday</label>
                        </div>
                        <div>
                            <input type="radio" id="sunday" name="day" value="Sunday">
                            <label for="sunday">Sunday</label>
                        </div>
                    </div>

                    <div class="container-fluid" id="time-container">
                        <label for="time" class="form-label">Lesson time</label>
                        <div><input id="datetimepicker" class="user-input" type="text"></div>
                    </div>
                    
                    <label for="price" class="form-label fw-bold">Total Price</label>
                    <h6 class="fw-bold" id="final-price"></h6>
                    <button type="submit" class="btn btn-primary" id="submit-btn">Submit</button>
                </form>
            </div>
            <!-- Rental price info -->
            <div class="col-3" id="info">
                <h2 class="fw-bold text-center">Instructor</h2>
                <div class="container">
                    <img id="istr-img">
                    <h3 class="text-center" id="istr-name">name</h3>
                    <p id="istr-detail"></p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Popup -->
    <div class="modal fade" id="popup" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title fw-bold" id="popupModalLabel">Confirmation</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <h5 id="modal-inst"></h5>
              <h5 id="modal-istr"></h5>
              <h5 id="modal-name"></h5>
              <h5 id="modal-email"></h5>
              <h5 id="modal-number"></h5>
              <h5 id="modal-time"></h5>
              <h5 class="fw-bold" id="modal-price"></h5>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-primary" id="confirm-btn">Confirm</button>
            </div>
          </div>
        </div>
    </div>

      <!-- Pop up confirm-->
    <div class="modal fade" id="confirmed" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="confirmedModalLabel">Confirmed</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                <p>A confirmation email has been sent to your email</p>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script
    src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
    crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="../css/jquery.datetimepicker.css">
    <script src="../scripts/jquery.datetimepicker.full.js"></script>
    <script>
        function fillIstrMenu(_callback){
            $.getJSON("../text/members.json", function(json){
               var istr = $('#istr-menu');
               istr.empty();
               $.each(json[0], function(key, data){
                istr.append($("<option />").text(key));
               });
               _callback();
            });
        }
        function fillInstMenu(){
            var name = $('#istr-menu').val();
            $.getJSON('../text/members.json', function(json){
                var inst = $('#inst-menu');
                inst.empty();
                console.log(json);
                console.log(name);
                $.each(json[0][name]['lesson-inst'], function(key, data){
                    inst.append($("<option />").text(key));
               });
               updatePrice();
            });
        }
        function updatePrice(){
            var name = $('#istr-menu').val();
            var istr = $('#inst-menu').val();
            var price = 0;
            $.getJSON('../text/members.json', function(json){
                price = json[0][name]['lesson-inst'][istr];
                $('#final-price').text(price);
            });
        }
        let current = new Date();
        current.setTime(current.getTime() + (60*60*1000)); // Rounds the time to the next hour 
        current.setMinutes(0);
        $(document).ready(function(){
            fillIstrMenu(fillInstMenu); // Init page

            $('#istr-menu').change(function(){ // Update inst list each time instructor is changed
                fillInstMenu();
            })
            $('#inst-menu').change(function(){
                updatePrice();
            })
            $('#datetimepicker').datetimepicker({ // Setting up time picker
                datepicker:false,
                value: "10:25"
            });
            $('#submit-btn').click(function(event){ // Setting up listener and popup 
                event.preventDefault();
                if(!$('#name').val() ||!$('#email').val()||$('input[name="day"]:checked').val()==undefined){
                    alert('Please fill out the name, email, and date section');
                }
                else{
                // Populating popup
                $('#modal-inst').text('Instrument: '+$('#inst-menu').val());
                $('#modal-istr').text('Instructor: '+$('#istr-menu').val());
                $('#modal-name').text('Name: '+$('#name').val());
                $('#modal-email').text('Email: '+$('#email').val());
                $('#modal-number').text('Phone Number: '+$('#number').val());
                $('#modal-time').text('Lesson time: '+$('input[name="day"]:checked').val()+', '+$('#datetimepicker').val());
                $('#modal-price').text('Total price: '+$('final-price').val());
                $('#popup').modal('show');
                }
                });

                $('#confirm-btn').click(function(event){
                    event.preventDefault();
                    $('#popup').modal('toggle'); // Closing previous popup
                    $('#confirmed').modal('show'); // Opening confirmation page
                });
                
        })
    </script>
    </body>
</html>




